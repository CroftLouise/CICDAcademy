version: "3"
services:
  jenkins:
    image: jenkins/jenkins:lts
    privileged: true
    user: root
    ports:
      - 8080:8080
      - 50000:50000
    container_name: jenkins
    volumes:
      # - ./jenkins_config:/var/jenkins_home
      - jenkins_config:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
  agent:
    image: jenkins/ssh-agent:jdk11
    privileged: true
    user: root
    container_name: agent
    expose:
      - 22
    environment:
      - JENKINS_AGENT_SSH_PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDN3DG3B7k+FCPoDFam8PmJfYtXjMvJig3fSwT+W/A+4HAGDRdLPoigDkpnYVmrk01uyDHZg4eaPO7MAAEoWGQ4xBTHwhWoYYMnslDtOTmuHFvs19D2z+DZzXTrbTEgdRcnUEYzxzuL4KfAUpCZU1CsKdDCqhmiD5rAeOFQzx2zaShJ7Q7gNW70EnZQlNjyAJ4heJxIA1ZF9Lbcmj3L3ErCiiDeF0acvxzfwxXpNzhZsS+YyVbLFNetfCJn1cpA3tYGDbwlWvfnm5DWHp1noHgxcZH2T3k0/UpIAK6cLjixoP382z4nfzuGeFcfsBxhW7105OBbdz8QmoYEILBiHNpwVgdL2GLQ0k6RjqKTs85JEO6cgUyeVkQgz8r45mj4pQ4EWkwV+X2kUV++wyl3lyCu1tu+knY10dWdEnpm0ZUP1Cd/5m9KFqNxug+Ub6aUYkPHs2+jGNGcwz1HOTWdfBpD+CYcg+58c/nYFrLKu9mMMI5xQNJj0kuKuaBnOc9zS+U= MarkMac@BEL-MC-210622G.local
volumes:
  jenkins_config:
